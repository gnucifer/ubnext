<?php
/**
 * @file
 * Code for the Search feature.
 */

function ubn_search_menu() {
  $items = array();
  $items['search/databases'] = array(
    'title'=> 'Redirecting to database search',
    'type' => MENU_CALLBACK,
    'page callback' => 'ubn_search_database_search_redirect',
    'access callback' => TRUE,
  );
  return $items;
}

function ubn_search_url_inbound_alter(&$path, $original_path, $path_language) {
  if(strpos($path, 'hitta/databaser/sok') === 0) {
    $path = str_replace('hitta/databaser/sok', 'find/databases/search', $path);
  }
}

function ubn_search_database_search_redirect() {
  //303 is more correct than 302 since POST/GET should follow the redirect
  drupal_goto('find/databases/search', array(), 303);
}

include_once 'ubn_search.features.inc';
